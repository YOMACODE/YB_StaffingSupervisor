@model YB_StaffingSupervisor.DataAccess.Entities.Custom.UserClaimRequetsCustom
@{
	ViewData["Title"] = "My Team";
	Layout = "~/Views/Shared/_ProantoV2MasterLayout.cshtml";
}
<div class="col-md-12">
    <div class="card">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4 class="mb-0"><b>September 2023</b></h4>
                <div>
                    <!-- <button class="btn btn-primary btn-sm" data-target="#claimModal"
                        data-toggle="modal">+
                        Add New
                        Claim</button> -->
                    <button class="btn btn-sm" title="Filter" data-toggle="collapse"
                            data-target="#filter">
                        <i class="fa fa-filter" aria-hidden="true"></i>
                    </button>
                </div>
            </div>

            <div class="collapse" id="filter" style="">
                <form asp-controller="UserClaimRequest" asp-action="UserClaimRequest" method="get">
                <div class="card mb-3">

                    <div class="card-header d-flex justify-content-between align-items-center">
                        <div class="font-weight-medium">Filters</div>
                        <div><i class="fa fa-filter"></i></div>
                    </div>
                    <div class="card-body">
                        <div class="row">

                            <div class="col-md-6 col-lg-3 mt-2">
                                <div class="form-group">
                                    <label for="exampleFormControlSelect1"><b>Claim Type</b> </label>
                                    <select class="form-control form-control-sm border-bottom" asp-for="SearchClaimType">
                                        <option>--Select--</option>
                                        <option>Travel</option>
                                        <option>Hotel</option>
                                        <option>Mobile</option>
                                        <option>Courier</option>
                                    </select>
                                </div>
                            </div>



                            <div class="col-md-6 col-lg-3 mt-2">
                                <div class="form-group">
                                    <label for="exampleFormControlSelect1"><b>Claim Status</b></label>
                                    <select class="form-control form-control-sm border-bottom" asp-for="SearchClaimStatus">
                                        <option>--Select--</option>
                                        <option>Approved</option>
                                        <option>Rejected</option>
                                        <option>Pending</option>
                                    </select>
                                </div>
                            </div>

                            <div class="col-md-6 col-lg-3 mt-2">
                                <div class="form-group">
                                    <label for="exampleFormControlInput1" class="active"><b>Date Of Joining</b></label>
                                    <input type="text" class="form-control form-control-sm border-bottom startdate" id="mdate" value="@ViewBag.SearchDOJ" asp-for="SearchDate" asp-format="{0:dd/MM/yyyy}" placeholder="DD/MM/YYYY" />
                                </div>
                            </div>
                            <div class= "col-md-6 col-lg-3 mt-2">
                                <div class="form-group">
                                    <label for="exampleFormControlSelect1"><b>Month</b><span class="red"><sup></sup></span></label>

                                    <select class="form-control form-control-sm" asp-for="SearchMonth" asp-items="@(new SelectList(Model.monthModelsListing, "Value", "Text", null))">
                                        <option value="">Select</option>
                                    </select>
                                    <span id="SearchMonth-Error" asp-validation-for="SearchMonth" class="text-danger SearchMonth-Error"></span>

                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3 mt-2">
                                <div class="form-group">
                                    <label for="exampleFormControlSelect1"><b>Year</b><span class="red"><sup></sup></span></label>
                                    <select class="form-control form-control-sm" asp-for="SearchYear" asp-items="@(new SelectList(Model.yearModelsListing, "Value", "Text", null))">
                                        <option value="">Select</option>
                                    </select>
                                    <span id="SearchYear-Error" asp-validation-for="SearchYear" class="text-danger SearchYear-Error"></span>
                                </div>
                            </div>
       

                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="d-flex justify-content-end">
                            <button class="btn btn-sm mr-1">Clear</button>
                            <button type="submit" class="btn btn-sm">Search</button>
                        </div>
                    </div>


                </div>
                </form>
            </div>


            <div class="table-responsive">
                <table class="table table-bordered table-sm text-center v-middle"
                       style="font-size: 12px;">
                    <thead id="sumit">
                        <tr>
                            <th>S. No.</th>
                            <th>Date</th>
                            <th style="max-width: 85px;">Distance Travelled (KM)</th>

                            <th>Distance Charge</th>
                            <th>View Route Map</th>
                            <th>Claim Type</th>
                            <th>Claim Amount</th>
                            <th>Description</th>
                            <th>View Supporting</th>
                            <th>Comment</th>
                            <th>Claim Status</th>
                            <th>Action</th>

                        </tr>
                    </thead>
                    <tbody class="text-center" class="text-center">
                        @if (Model != null)
                        {
                            if (Model.UserClaimRequestListing != null && Model.UserClaimRequestListing.Count() > 0)
                            {
                                foreach (var item in Model.UserClaimRequestListing)
                                {
                                    <tr>
                                        <td>@item.SNo</td>
                                        <td>@item.Date</td>
                                        <td>@item.DistanceTravelled</td>
                                        <td>@item.DistanceCharge</td>
                                        <td>
                                            <button data-toggle="offcanvas" data-target="#myOffcanvas"
                                                    class="btn-sm btn">
                                                View Map
                                            </button>
                                        </td>
                                        <td>@item.ClaimType</td>
                                        <td>@item.ClaimAmount</td>
                                        <td>
                                            <span style="color:#2a69b2" data-toggle="modal"
                                                  data-target="#descriptionModal" class="cursor-pointer">
                                                View
                                                Description
                                            </span>
                                        </td>
                                 @*        <td>@item.Description</td> *@
                                        <td>@item.ViewSupporting</td>
                                           <td> <i class="fa fa-comment" data-toggle="modal"
                                             data-target="#commentModal" onclick="bindCommentModel('@item.Comment');"></i>
                                             </td>

                                        <td>@item.ClaimStatus</td>
                                        <td>
                                            <button class="btn btn-sm" data-toggle="modal" onclick="BindLeaveId('@item.')"
                                                    data-target="#verifyModal">
                                                Approved/Reject
                                            </button>
                                        </td>

                          
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="25" style="text-align:center;">** No Record Found **</td>
                                </tr>
                            }

                        }
                        else
                        {
                            <tr><td colspan="25" style="text-align:center;">** No Record Found **</td></tr>
                        }

                    </tbody>
                </table>
            </div>



        </div>
    </div>
</div>


@*  comment model *@
<div class="modal fade" id="commentModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
     style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">View Comment</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="approve-reject">
                    <div class="row">
                        <div class="col-md-12">
                            <textarea class="form-control" cols="4" rows="5" placeholder="Write Remarks"
                                      disabled="">This is some comments given by reviwer</textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!---verify modal--->

<div class="modal fade" id="verifyModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">Verify Claim Request</h5>
                <h5 class="modal-cut" data-dismiss="modal" aria-label="Close" aria-hidden="true">✖</h5>
            </div>
            <div class="modal-body">

                <form asp-action="UserClaimRequest" method="post">
					<input type="hidden" asp-for="UserId" id="hdnLeaveRequestId" />

                <div class="row">
                    <div class="form col-12 col-sm-12 col-xs-12 col-md-12 col-lg-12 col-xl-12">
                        <label class="active"><b>Status</b><sup class="red">*</sup></label>
                        <div class="form-group">
                            <select class="form-control form-control-sm" id="selectStatus">
                                <option>Select</option>
                                <option value="approve">Approve</option>
                                <option value="reject">Reject</option>
                            </select>
                        </div>
                    </div>


                </div>
                <div class="form-group">
                    <div class="nomandate" style="display: none;">
                        <label for="exampleFormControlTextarea1">
                            <b>
                                Write Comment <sup class="red">*</sup>
                            </b>
                        </label>
                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
                    </div>

                    <div class="mandate" style="display: none;">
                        <label for="exampleFormControlTextarea1"><b>Write Comment</b></label>
                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
                    </div>
                </div>
                    <div class="modal-footer py-2">
                        <button class="btn1 btn-sm reject-btn" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-sm btn-primary approval-btn">Save</button>
                    </div>
                    </form>
            </div>
            
        </div>
        
    </div>
</div>


   @* View Map *@

@* <div class="offcanvas" id="myOffcanvas">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">View Route Map</h5>
        <button type="button" class="close" data-toggle="offcanvas" data-target="#myOffcanvas" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="offcanvas-body">
        <h6><b>Travel date </b>: 23-03-2023</h6>
        <ul class="timeline">
            <li>
                <h6 class="text-theme">Start My Day</h6>
                <p class="font-12 text-muted mb-2">10:00 AM | 0.0 KM</p>
                <p>Day Started</p>
            </li>
            <li>
                <h6 class="text-theme">Meeting Title 1</h6>
                <p class="font-12 text-muted mb-2">10:30 AM | 07.2 KM</p>
                <p>Short meeting description</p>
            </li>
            <li>
                <h6 class="text-theme">Meeting Title 2</h6>
                <p class="font-12 text-muted mb-2">11:30 AM | 17.0 KM</p>
                <p>Short meeting description</p>
            </li>
            <li>
                <h6 class="text-theme">Meeting Title 3</h6>
                <p class="font-12 text-muted mb-2">12:30 AM | 20.0 KM</p>
                <p>Short meeting description</p>
            </li>

            <li>
                <h6 class="text-theme">Meeting Title 4</h6>
                <p class="font-12 text-muted mb-2">12:45 AM | 21.0 KM</p>
                <p>Short meeting description</p>
            </li>

            <li>
                <h6 class="text-theme">Meeting Title 5</h6>
                <p class="font-12 text-muted mb-2">01:30 AM | 23.0 KM</p>
                <p>Short meeting description</p>
            </li>

            <li>
                <h6 class="text-theme">Meeting Title 6</h6>
                <p class="font-12 text-muted mb-2">02:00 AM | 26.0 KM</p>
                <p>Short meeting description</p>
            </li>

            <li>
                <h6 class="text-theme">Meeting Title 7</h6>
                <p class="font-12 text-muted mb-2">02:45 AM | 28.0 KM</p>
                <p>Short meeting description</p>
            </li>

            <li>
                <h6 class="text-theme">Meeting Title 8</h6>
                <p class="font-12 text-muted mb-2">03:45 AM | 29.5 KM</p>
                <p>Short meeting description</p>
            </li>

            <li>
                <h6 class="text-theme">Meeting Title 9</h6>
                <p class="font-12 text-muted mb-2">06:30 AM | 40.0 KM</p>
                <p>Short meeting description</p>
            </li>

            <li>
                <h6 class="text-theme">Check Out</h6>
                <p class="font-12 text-muted mb-2">07:30 AM | 42.5 KM</p>
                <p>Day Checked Out!</p>
            </li>
        </ul>

    </div>

    <div class="offcanvas-footer">
        <h6><span class="font-weight-medium">Total Distance Travelled - </span> 42.5 KM</h6>
    </div>

</div> *@

@* view Discription *@

<div class="modal fade" id="descriptionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
     style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">View Description</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="approve-reject">
                    <div class="row">
                        <div class="col-md-12">
                            <textarea class="form-control" cols="4" rows="5" placeholder="Write Remarks"
                                      disabled="">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Saepe voluptas nulla esse eligendi repellendus, et, amet, nihil pariatur est libero laborum. Ut, vitae. Provident, ipsa.</textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function BindLeaveId(id) {
        $('#hdnLeaveRequestId').val(id);
    }
    //verify modal
    function approveReject() {
        let statusValue = $('#selectStatus').val();
        if (statusValue === '1') {
            $('.nomandate').hide();
            $('.mandate').show();
        }
        else if (statusValue === '0') {
            $('.nomandate').hide();
            $('.mandate').show();
        }

        else {
            $('.nomandate').hide();
            $('.mandate').hide();
        }
    }

    function bindCommentModel(comment) {
        $('#commentArea').val(comment);
    }
</script>